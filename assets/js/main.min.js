$(document).ready((function(){const t=$(".elevator"),a=$(".floor"),e=($(".elevator").height(),$(".floor").height()),o=document.getElementById("arrivalSound"),i=new Array(t.length).fill(null).map((()=>[]));function s(a){const n=i[a],l=$(t[a]);if(n.length>0&&!l.data("moving")){const t=n.shift(),i=t.floor,r=t.button,d=(10-i)*e;l.data("moving",!0).removeClass("call").removeClass("arrived").addClass("waiting"),l.animate({top:d-45},{duration:600,easing:"swing"}).queue((function(){$(this).data("floor",i).data("moving",!1),setTimeout((()=>{r.text("Arrived").removeClass("waiting").addClass("arrived"),$(this).removeClass("waiting").addClass("arrived"),o.play()}),1e3),setTimeout((()=>{o.pause(),r.text("Call").removeClass("arrived"),$(this).removeClass("arrived").addClass("call"),s(a)}),2e3),$(this).dequeue()}))}}a.find("button").click((function(){const a=$(this).closest(".floor").data("floor"),e=$(this);e.text("Waiting").addClass("waiting");const o=function(a){let e=-1,o=1/0;return t.each((function(t){const i=$(this).data("floor"),s=Math.abs(i-a);s<o&&(o=s,e=t)})),e}(a);i[o].push({floor:a,button:e}),s(o)}))}));